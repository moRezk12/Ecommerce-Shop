import{a as q,b as j,c as z}from"./chunk-CCENWMRP.js";import"./chunk-M3SUPOBD.js";import{a as B}from"./chunk-MW3RMLJA.js";import{a as T}from"./chunk-R76TJYK7.js";import"./chunk-OGZCDNXD.js";import{a as V}from"./chunk-7SZWEN6G.js";import"./chunk-E42UTF7O.js";import{a as $}from"./chunk-HTFUH5GH.js";import{g as G}from"./chunk-RZYCULMW.js";import"./chunk-UBLUKLBD.js";import{b as x,c as d,e as I,f as L,g as A,h as y,j as N,k,l as P,o as M}from"./chunk-SO7K3EP6.js";import{e as D}from"./chunk-NQWAM5ZD.js";import"./chunk-OJFVBY4N.js";import"./chunk-YVBTHYP3.js";import"./chunk-57RWOG5Y.js";import{k as F,q as E}from"./chunk-2XMD6XAK.js";import{Ab as C,Ib as S,Pb as b,Qa as r,Qb as c,Ra as f,Rb as u,ca as w,fb as g,jb as a,ob as l,sb as m,tb as s,ub as n,zb as h}from"./chunk-GCLD3WRZ.js";var O=()=>({severity:"error",summary:"validation error",detail:"email is required"}),v=e=>[e],R=()=>({severity:"error",summary:"validation error",detail:"email not valid"}),U=()=>({severity:"error",summary:"validation error",detail:"password is required"}),Z=()=>({severity:"error",summary:"validation error",detail:"must be at least 8 char"}),H=()=>({severity:"error",summary:"validation error",detail:"Password must have a capital letter, lowercase letter, number, and special character "});function J(e,p){e&1&&n(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,O)))("enableService",!1)("closable",!1)}function K(e,p){e&1&&n(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,R)))("enableService",!1)("closable",!1)}function Q(e,p){if(e&1&&g(0,J,1,6,"p-messages",12)(1,K,1,6,"p-messages",12),e&2){let i=C();l(0,i.email.getError("required")?0:-1),r(),l(1,i.email.getError("email")?1:-1)}}function W(e,p){e&1&&n(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,U)))("enableService",!1)("closable",!1)}function X(e,p){e&1&&n(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,Z)))("enableService",!1)("closable",!1)}function Y(e,p){e&1&&n(0,"p-messages",12),e&2&&a("value",u(4,v,c(3,H)))("enableService",!1)("closable",!1)}function ee(e,p){if(e&1&&g(0,W,1,6,"p-messages",12)(1,X,1,6,"p-messages",12)(2,Y,1,6,"p-messages",12),e&2){let i=C();l(0,i.password.getError("required")?0:-1),r(),l(1,i.password.getError("minlength")?1:-1),r(),l(2,i.password.getError("pattern")?2:-1)}}var ve=(()=>{class e{constructor(i,t,o,_){this.authService_=i,this._notifecationsService=t,this.router=o,this._userData=_,this.showPassword=!1,this.initFormControls(),this.initFormGroupe()}initFormControls(){this.email=new y("",[d.required,d.email]),this.password=new y("",[d.required,d.minLength(8),d.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()\-_=+{};:,<.>]).{8,}$/)])}initFormGroupe(){this.loginForm=new A({email:this.email,password:this.password})}submit(){this.loginForm.valid?this.siginIn(this.loginForm.value):(this.loginForm.markAllAsTouched(),Object.keys(this.loginForm.controls).forEach(i=>this.loginForm.controls[i].markAsDirty()))}siginIn(i){this.authService_.login(i).subscribe({next:t=>{t._id&&(this._notifecationsService.showSuccess("success","success login"),localStorage.setItem("token",t._id),this._userData.userName.next(t.name),localStorage.setItem("username",t.name)),this.router.navigate(["home"])},error:t=>{this._notifecationsService.showError("Error",t.error.error)}})}togglePassword(){this.showPassword=!this.showPassword}static{this.\u0275fac=function(t){return new(t||e)(f(T),f($),f(G),f(B))}}static{this.\u0275cmp=w({type:e,selectors:[["app-login"]],standalone:!0,features:[b],decls:23,vars:6,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","email",3,"autofocus"],[1,"validation-msg"],[1,"position-relative"],[1,"pi","pi-lock"],["pInputText","","formControlName","password","placeholder","Password",3,"type"],[1,"pi",2,"cursor","pointer",3,"click","ngClass"],["type","submit","label","Login"],[3,"value","enableService","closable"]],template:function(t,o){t&1&&(m(0,"section")(1,"div",0)(2,"h1",1),S(3,"login form"),s(),m(4,"form",2),h("ngSubmit",function(){return o.submit()}),m(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),n(8,"i",4),s(),n(9,"input",5),s(),m(10,"div",6),g(11,Q,2,2),s()(),m(12,"div",3)(13,"div",7)(14,"p-inputGroup")(15,"p-inputGroupAddon"),n(16,"i",8),s(),n(17,"input",9),m(18,"p-inputGroupAddon")(19,"i",10),h("click",function(){return o.togglePassword()}),s()()()(),m(20,"div",6),g(21,ee,3,3),s()(),n(22,"p-button",11),s()()()),t&2&&(r(4),a("formGroup",o.loginForm),r(5),a("autofocus",!0),r(2),l(11,o.email.touched&&o.email.dirty?11:-1),r(6),a("type",o.showPassword?"text":"password"),r(2),a("ngClass",o.showPassword?"pi-eye-slash":"pi-eye"),r(2),l(21,o.password.dirty&&o.password.touched?21:-1))},dependencies:[z,N,x,I,L,k,P,q,j,M,D,V,E,F],styles:[`.p-element.p-button{display:block;width:100%}
`],encapsulation:2})}}return e})();export{ve as LoginComponent};
