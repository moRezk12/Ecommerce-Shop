import{a as M,b as D,c as V}from"./chunk-CCENWMRP.js";import"./chunk-M3SUPOBD.js";import{a as z}from"./chunk-MW3RMLJA.js";import{a as P}from"./chunk-R76TJYK7.js";import"./chunk-OGZCDNXD.js";import{a as U}from"./chunk-7SZWEN6G.js";import"./chunk-E42UTF7O.js";import{a as L}from"./chunk-HTFUH5GH.js";import{g as x}from"./chunk-RZYCULMW.js";import"./chunk-UBLUKLBD.js";import{b as T,c as u,e as R,f as G,g as N,h as w,j as A,k as I,l as k,o as j}from"./chunk-SO7K3EP6.js";import{e as q}from"./chunk-NQWAM5ZD.js";import"./chunk-OJFVBY4N.js";import"./chunk-YVBTHYP3.js";import"./chunk-57RWOG5Y.js";import{k as F,q as E}from"./chunk-2XMD6XAK.js";import{Ab as h,Ib as S,Pb as b,Qa as n,Qb as c,Ra as v,Rb as d,ca as y,fb as _,jb as a,ob as l,sb as m,tb as s,ub as o,zb as C}from"./chunk-GCLD3WRZ.js";var $=()=>({severity:"error",summary:"validation error",detail:"name is required"}),f=e=>[e],B=()=>({severity:"error",summary:"validation error",detail:"must be at least 3 char"}),O=()=>({severity:"error",summary:"validation error",detail:"cannot exceed 20 char"}),Z=()=>({severity:"error",summary:"validation error",detail:"email is required"}),H=()=>({severity:"error",summary:"validation error",detail:"email not valid"}),J=()=>({severity:"error",summary:"validation error",detail:"password is required"}),K=()=>({severity:"error",summary:"validation error",detail:"must be at least 8 char"}),Q=()=>({severity:"error",summary:"validation error",detail:"Password must have a capital letter, lowercase letter, number, and special character "}),W=()=>({severity:"error",summary:"validation error",detail:"rePassword not match password"});function X(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,$)))("enableService",!1)("closable",!1)}function Y(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,B)))("enableService",!1)("closable",!1)}function ee(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,O)))("enableService",!1)("closable",!1)}function ie(e,p){if(e&1&&_(0,X,1,6,"p-messages",15)(1,Y,1,6,"p-messages",15)(2,ee,1,6,"p-messages",15),e&2){let i=h();l(0,i.name.getError("required")?0:-1),n(),l(1,i.name.getError("minlength")?1:-1),n(),l(2,i.name.getError("maxlength")?2:-1)}}function te(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,Z)))("enableService",!1)("closable",!1)}function oe(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,H)))("enableService",!1)("closable",!1)}function re(e,p){if(e&1&&_(0,te,1,6,"p-messages",15)(1,oe,1,6,"p-messages",15),e&2){let i=h();l(0,i.email.getError("required")?0:-1),n(),l(1,i.email.getError("email")?1:-1)}}function ne(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,J)))("enableService",!1)("closable",!1)}function ae(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,K)))("enableService",!1)("closable",!1)}function se(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,Q)))("enableService",!1)("closable",!1)}function le(e,p){if(e&1&&_(0,ne,1,6,"p-messages",15)(1,ae,1,6,"p-messages",15)(2,se,1,6,"p-messages",15),e&2){let i=h();l(0,i.password.getError("required")?0:-1),n(),l(1,i.password.getError("minlength")?1:-1),n(),l(2,i.password.getError("pattern")?2:-1)}}function me(e,p){e&1&&o(0,"p-messages",15),e&2&&a("value",d(4,f,c(3,W)))("enableService",!1)("closable",!1)}function pe(e,p){if(e&1&&_(0,me,1,6,"p-messages",15),e&2){let i=h();l(0,i.rePassword.getError("passNotMatch")?0:-1)}}var Pe=(()=>{class e{constructor(i,r,t,g){this._authService=i,this._notifecationsService=r,this._router=t,this._userData=g,this.isRegisterd=!1,this.showPassword=!1,this.showrePassword=!1,this.initFormControls(),this.initFormGroupe()}initFormControls(){this.name=new w("",[u.required,u.minLength(3),u.maxLength(20)]),this.email=new w("",[u.required,u.email]),this.password=new w("",[u.required,u.minLength(8),u.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()\-_=+{};:,<.>]).{8,}$/)]),this.rePassword=new w("",[u.required,this.passwordMatch(this.password)])}initFormGroupe(){this.registrationForm=new N({name:this.name,email:this.email,password:this.password,rePassword:this.rePassword})}passwordMatch(i){return r=>i.value!==r.value||r.value===""?{passNotMatch:!0}:null}submit(){this.registrationForm.valid?(this.siginUp(this.registrationForm.value),this.isRegisterd=!0):(this.registrationForm.markAllAsTouched(),Object.keys(this.registrationForm.controls).forEach(i=>this.registrationForm.controls[i].markAsDirty()))}siginUp(i){this._authService.register(i).subscribe({next:r=>{if(r._id){this._notifecationsService.showSuccess("success","success register");let{email:t,password:g}=i;this._authService.login({email:t,password:g}).subscribe(ce=>{localStorage.setItem("token",r._id),this._router.navigate(["home"]),this._userData.userName.next(r.name),localStorage.setItem("username",r.name)})}},error:r=>{this._notifecationsService.showError("Error",r.error.error)}})}togglePassword(){this.showPassword=!this.showPassword}togglerePassword(){this.showrePassword=!this.showrePassword}static{this.\u0275fac=function(r){return new(r||e)(v(P),v(L),v(x),v(z))}}static{this.\u0275cmp=y({type:e,selectors:[["app-register"]],standalone:!0,features:[b],decls:38,vars:10,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-user"],["pInputText","","formControlName","name","placeholder","Username",3,"autofocus"],[1,"validation-smg"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","email"],[1,"validation-msg"],[1,"pi","pi-lock"],["pInputText","","formControlName","password","placeholder","password",3,"type"],[1,"pi",2,"cursor","pointer",3,"click","ngClass"],["pInputText","","formControlName","rePassword","placeholder","rePassword",3,"type"],["type","submit","label","Submit"],[3,"value","enableService","closable"]],template:function(r,t){r&1&&(m(0,"section")(1,"div",0)(2,"h1",1),S(3,"register form"),s(),m(4,"form",2),C("ngSubmit",function(){return t.submit()}),m(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),o(8,"i",4),s(),o(9,"input",5),s(),m(10,"div",6),_(11,ie,3,3),s()(),m(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),o(15,"i",7),s(),o(16,"input",8),s(),m(17,"div",9),_(18,re,2,2),s()(),m(19,"div",3)(20,"p-inputGroup")(21,"p-inputGroupAddon"),o(22,"i",10),s(),o(23,"input",11),m(24,"p-inputGroupAddon")(25,"i",12),C("click",function(){return t.togglePassword()}),s()()(),m(26,"div",9),_(27,le,3,3),s()(),m(28,"div",3)(29,"p-inputGroup")(30,"p-inputGroupAddon"),o(31,"i",10),s(),o(32,"input",13),m(33,"p-inputGroupAddon")(34,"i",12),C("click",function(){return t.togglerePassword()}),s()()(),m(35,"div",9),_(36,pe,1,1),s()(),o(37,"p-button",14),s()()()),r&2&&(n(4),a("formGroup",t.registrationForm),n(5),a("autofocus",!0),n(2),l(11,t.name.dirty&&t.name.touched?11:-1),n(7),l(18,t.email.touched&&t.email.dirty?18:-1),n(5),a("type",t.showPassword?"text":"password"),n(2),a("ngClass",t.showPassword?"pi-eye-slash":"pi-eye"),n(2),l(27,t.password.dirty&&t.password.touched?27:-1),n(5),a("type",t.showrePassword?"text":"password"),n(2),a("ngClass",t.showrePassword?"pi-eye-slash":"pi-eye"),n(2),l(36,t.rePassword.dirty&&t.rePassword.touched?36:-1))},dependencies:[V,A,T,R,G,I,k,M,D,j,q,U,E,F],styles:[`.p-element.p-button{display:block;width:100%}
`],encapsulation:2})}}return e})();export{Pe as RegisterComponent};
