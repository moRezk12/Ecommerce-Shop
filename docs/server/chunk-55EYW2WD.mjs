import './polyfills.server.mjs';
import{a as k,b as q,c as V}from"./chunk-HTZD5BZ4.mjs";import{a as M}from"./chunk-HHN4LE3M.mjs";import{e as D}from"./chunk-7MVJ2AIR.mjs";import"./chunk-LONVUEKV.mjs";import"./chunk-QIQ6ZORK.mjs";import"./chunk-KU3OWX5F.mjs";import"./chunk-XKXUENXH.mjs";import{a as B}from"./chunk-KFJRXRTM.mjs";import{b as E,c as d,e as G,f as I,g as L,h,j as T,k as N,l as A,o as j}from"./chunk-LZY2TEO4.mjs";import{a as z}from"./chunk-6BD4JUNB.mjs";import{a as x}from"./chunk-4FXFYVUP.mjs";import"./chunk-ZY6AP4W3.mjs";import"./chunk-JFZEDU5W.mjs";import"./chunk-F5RLKEXU.mjs";import{k as w}from"./chunk-IW7GKRYI.mjs";import"./chunk-ECRDYV35.mjs";import"./chunk-MFG7RTPI.mjs";import{Gb as b,Nb as F,Oa as a,Ob as c,Pa as f,Pb as u,_ as y,db as v,hb as s,mb as l,qb as m,rb as n,sb as o,xb as S,yb as _}from"./chunk-4UJYGIJ6.mjs";import"./chunk-VVCT4QZE.mjs";var O=()=>({severity:"error",summary:"validation error",detail:"email is required"}),g=e=>[e],R=()=>({severity:"error",summary:"validation error",detail:"email not valid"}),U=()=>({severity:"error",summary:"validation error",detail:"password is required"}),H=()=>({severity:"error",summary:"validation error",detail:"must be at least 3 char"}),J=()=>({severity:"error",summary:"validation error",detail:"cannot exceed 20 char"});function K(e,p){e&1&&o(0,"p-messages",10),e&2&&s("value",u(4,g,c(3,O)))("enableService",!1)("closable",!1)}function P(e,p){e&1&&o(0,"p-messages",10),e&2&&s("value",u(4,g,c(3,R)))("enableService",!1)("closable",!1)}function Q(e,p){if(e&1&&v(0,K,1,6,"p-messages",10)(1,P,1,6,"p-messages",10),e&2){let i=_();l(0,i.email.getError("required")?0:-1),a(),l(1,i.email.getError("email")?1:-1)}}function W(e,p){e&1&&o(0,"p-messages",10),e&2&&s("value",u(4,g,c(3,U)))("enableService",!1)("closable",!1)}function X(e,p){e&1&&o(0,"p-messages",10),e&2&&s("value",u(4,g,c(3,H)))("enableService",!1)("closable",!1)}function Y(e,p){e&1&&o(0,"p-messages",10),e&2&&s("value",u(4,g,c(3,J)))("enableService",!1)("closable",!1)}function Z(e,p){if(e&1&&v(0,W,1,6,"p-messages",10)(1,X,1,6,"p-messages",10)(2,Y,1,6,"p-messages",10),e&2){let i=_();l(0,i.password.getError("required")?0:-1),a(),l(1,i.password.getError("minlength")?1:-1),a(),l(2,i.password.getError("maxlength")?2:-1)}}var ue=(()=>{class e{constructor(i,t,r,C){this.authService_=i,this._notifecationsService=t,this.router=r,this._userData=C,this.initFormControls(),this.initFormGroupe()}initFormControls(){this.email=new h("",[d.required,d.email]),this.password=new h("",[d.required,d.minLength(3),d.maxLength(20)])}initFormGroupe(){this.loginForm=new L({email:this.email,password:this.password})}submit(){this.loginForm.valid?this.siginIn(this.loginForm.value):(this.loginForm.markAllAsTouched(),Object.keys(this.loginForm.controls).forEach(i=>this.loginForm.controls[i].markAsDirty()))}siginIn(i){this.authService_.login(i).subscribe({next:t=>{t._id&&(this._notifecationsService.showSuccess("success","success login"),localStorage.setItem("token",t._id),this._userData.userName.next(t.name),localStorage.setItem("username",t.name)),this.router.navigate(["home"])},error:t=>{this._notifecationsService.showError("Error",t.error.error)}})}static{this.\u0275fac=function(t){return new(t||e)(f(x),f(z),f(w),f(B))}}static{this.\u0275cmp=y({type:e,selectors:[["app-login"]],standalone:!0,features:[F],decls:20,vars:4,consts:[[1,"container","my-8"],[1,"my-3","font-bold","capitalize"],[3,"ngSubmit","formGroup"],[1,"field"],[1,"pi","pi-envelope"],["pInputText","","formControlName","email","placeholder","email",3,"autofocus"],[1,"validation-msg"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","placeholder","password"],["type","submit","label","Login"],[3,"value","enableService","closable"]],template:function(t,r){t&1&&(m(0,"section")(1,"div",0)(2,"h1",1),b(3,"login form"),n(),m(4,"form",2),S("ngSubmit",function(){return r.submit()}),m(5,"div",3)(6,"p-inputGroup")(7,"p-inputGroupAddon"),o(8,"i",4),n(),o(9,"input",5),n(),m(10,"div",6),v(11,Q,2,2),n()(),m(12,"div",3)(13,"p-inputGroup")(14,"p-inputGroupAddon"),o(15,"i",7),n(),o(16,"input",8),n(),m(17,"div",6),v(18,Z,3,3),n()(),o(19,"p-button",9),n()()()),t&2&&(a(4),s("formGroup",r.loginForm),a(5),s("autofocus",!0),a(2),l(11,r.email.touched&&r.email.dirty?11:-1),a(7),l(18,r.password.dirty&&r.password.touched?18:-1))},dependencies:[V,T,E,G,I,N,A,k,q,j,D,M],styles:[`.p-element.p-button{display:block;width:100%}
`],encapsulation:2})}}return e})();export{ue as LoginComponent};
