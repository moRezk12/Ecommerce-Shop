<section>
  <div class="container my-8">
    <h1 class="my-3 font-bold capitalize">login form</h1>
    <form [formGroup]="loginForm" (ngSubmit)="submit()">
      <!-- Email -->
      <div class="field">
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-envelope"></i>
          </p-inputGroupAddon>
          <input pInputText formControlName="email" placeholder="email" [autofocus]="true" />
        </p-inputGroup>
        <div class="validation-msg">
          @if (email.touched&& email.dirty) { @if (email.getError('required')) {
          <p-messages [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'email is required'
              }
            ]" [enableService]="false" [closable]="false" />
          } @if (email.getError('email')) {
          <p-messages [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'email not valid'
              }
            ]" [enableService]="false" [closable]="false" />
          } }
        </div>
      </div>
      <!-- Password -->
      <div class="field">
        <div class="position-relative">
          <p-inputGroup>
            <!-- أيقونة القفل -->
            <p-inputGroupAddon>
              <i class="pi pi-lock"></i>
            </p-inputGroupAddon>

            <!-- حقل الباسورد مع dynamic type -->
            <input pInputText [type]="showPassword ? 'text' : 'password'" formControlName="password"
              placeholder="Password" />

            <p-inputGroupAddon>
              <i class="pi" [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'" style="cursor: pointer"
                (click)="togglePassword()"></i>
            </p-inputGroupAddon>

          </p-inputGroup>
        </div>

        <div class="validation-msg">
          @if (password.dirty && password.touched) { @if
          (password.getError('required')) {
          <p-messages [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'password is required'
              }
            ]" [enableService]="false" [closable]="false" />
          } @if (password.getError('minlength')) {
          <p-messages [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'must be at least 8 char'
              }
            ]" [enableService]="false" [closable]="false" />
          } @if(password.getError('pattern')) {
          <p-messages [value]="[
              {
                severity: 'error',
                summary: 'validation error',
                detail: 'Password must have a capital letter, lowercase letter, number, and special character '
              }
            ]" [enableService]="false" [closable]="false" />
          } }
        </div>
      </div>
      <p-button type="submit" label="Login" />
    </form>
  </div>
</section>
